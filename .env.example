# =============================================================================
# TASI AI Platform - Environment Variables
# =============================================================================
# Copy this file to .env and fill in your values.

# ---------------------------------------------------------------------------
# LLM API Key (backward compatible - used if LLM_API_KEY is not set)
# ---------------------------------------------------------------------------
ANTHROPIC_API_KEY=sk-ant-your-key-here

# ---------------------------------------------------------------------------
# Database Settings (prefix: DB_)
# ---------------------------------------------------------------------------
# Backend: "sqlite" (default) or "postgres"
DB_BACKEND=sqlite
# SQLite: path relative to project root (or absolute)
DB_SQLITE_PATH=saudi_stocks.db

# ---------------------------------------------------------------------------
# PostgreSQL Settings (used when DB_BACKEND=postgres)
# These are shared by Docker Compose and the app.
# ---------------------------------------------------------------------------
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=tasi_platform
POSTGRES_USER=tasi_user
# IMPORTANT: Use a strong password in production (required by docker-compose)
POSTGRES_PASSWORD=changeme

# ---------------------------------------------------------------------------
# LLM Settings (prefix: LLM_, Anthropic only)
# ---------------------------------------------------------------------------
LLM_MODEL=claude-sonnet-4-5-20250929
# API key (overrides ANTHROPIC_API_KEY if set)
LLM_API_KEY=
LLM_MAX_TOOL_ITERATIONS=10

# ---------------------------------------------------------------------------
# Server Settings (prefix: SERVER_)
# ---------------------------------------------------------------------------
SERVER_HOST=0.0.0.0
SERVER_PORT=8084
SERVER_DEBUG=false

# ---------------------------------------------------------------------------
# Authentication Settings (prefix: AUTH_)
# ---------------------------------------------------------------------------
# IMPORTANT: Set a stable secret in production. Default generates a random
# secret on each startup (tokens become invalid after restart).
# REQUIRED in production: generate with `python -c "import secrets; print(secrets.token_urlsafe(32))"`
AUTH_JWT_SECRET=change-me-to-a-stable-secret
AUTH_JWT_ALGORITHM=HS256
AUTH_ACCESS_TOKEN_EXPIRE_MINUTES=30
AUTH_REFRESH_TOKEN_EXPIRE_DAYS=7

# ---------------------------------------------------------------------------
# Connection Pool Settings (PostgreSQL only)
# ---------------------------------------------------------------------------
PG_POOL_MIN=2
PG_POOL_MAX=10

# ---------------------------------------------------------------------------
# Redis / Cache Settings
# ---------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379/0
# Set a password for Redis in production (leave empty for development)
REDIS_PASSWORD=
CACHE_ENABLED=false
CACHE_DEFAULT_TTL=300

# ---------------------------------------------------------------------------
# Middleware Settings (prefix: MW_)
# ---------------------------------------------------------------------------
# IMPORTANT: In production, add your deployment domain here, e.g.:
# MW_CORS_ORIGINS=http://localhost:3000,http://localhost:8084,https://raid-ai-app-production.up.railway.app
MW_CORS_ORIGINS=http://localhost:3000,http://localhost:8084
MW_RATE_LIMIT_PER_MINUTE=60
MW_LOG_SKIP_PATHS=/health,/favicon.ico

# ---------------------------------------------------------------------------
# pgAdmin (optional, only with: docker compose --profile tools up)
# ---------------------------------------------------------------------------
PGADMIN_DEFAULT_EMAIL=admin@tasi.local
# REQUIRED: set a strong password (required by docker-compose)
PGADMIN_DEFAULT_PASSWORD=

# ---------------------------------------------------------------------------
# Ingestion Pipeline Settings
# ---------------------------------------------------------------------------
# Batch size for processing tickers (default: 10)
INGESTION_BATCH_SIZE=10
# Seconds to sleep between batches for rate limiting (default: 2)
INGESTION_RATE_LIMIT_SECONDS=2
